#/bin/bash

logfile="get_nmon.log"
databases=( rd rr ad ar ed )
was=( rd rr ad ar ed )
touch $logfile

date >> $logfile
echo " ----------deploy01------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root deploy01.fleetboard.dmz 'cd /home/fbadmin/; ls -al'" >> $logfile

echo " ----------build01------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root build01.es.fleetboard.dmz 'cd /home/fbadmin/; ls -al'" >> $logfile

echo " ----------database------------- " >> $logfile
for d in ${databases[@]}; do
	echo "----------${d}-------------" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root zu5"$d"005 'cd /home/fbadmin/; ls -al'" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root zu5"$d"002 'cd /home/fbadmin/; ls -al'" >> $logfile
done

echo " ----------was------------- " >> $logfile
for w in ${was[@]}; do
	echo "----------${w}-------------" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root "$w"was01l2 'cd /home/fbadmin/; ls -al'" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root "$w"was02l2 'cd /home/fbadmin/; ls -al'" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root "$w"was01l5 'cd /home/fbadmin/; ls -al'" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root "$w"was02l5 'cd /home/fbadmin/; ls -al'" >> $logfile
done

echo " ----------svn------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l svnadm svn.fleetboard.dmz 'cd /home/svnadm/svnadmin; ls -al'" >> $logfile
echo " ----------svn user rights------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l svnadm svn.fleetboard.dmz 'cat /home/svnadm/svnadmin/trunk/public-svn-authzfile'" >> $logfile

echo " ---------------------------- " >> $logfile
echo "Finished @" >> $logfile
date >> $logfile

cat $logfile | mail -s "log" fl33tb0ard@gmail.com

rm $logfile

exit 0
