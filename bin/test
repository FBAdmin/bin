#/bin/bash

logfile="get_nmon.log"
databases=( zu5re005 zu5re002 )

touch $logfile

date >> $logfile
echo " ----------deploy01------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root deploy01.fleetboard.dmz 'cd /home/fbadmin/; ls -al'" >> $logfile

echo " ----------build01------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root build01.es.fleetboard.dmz 'cd /home/fbadmin/; ls -al'" >> $logfile

echo " ----------databases------------- " >> $logfile
for d in ${!databases[@]}; do
	echo "----------${d}-------------" >> $logfile
	sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l root $d 'cd /home/fbadmin/; ls -al'" >> $logfile
done

echo " ----------svn------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l svnadm svn.fleetboard.dmz 'cd /home/svnadm/svnadmin; ls -al'" >> $logfile
echo " ----------svn user rights------------- " >> $logfile
sudo su - fbadmin -c "ssh -oStrictHostKeyChecking=no -l svnadm svn.fleetboard.dmz 'cat /home/svnadm/svnadmin/trunk/public-svn-authzfile'" >> $logfile

echo " ---------------------------- " >> $logfile
echo "Finished @" >> $logfile
date >> $logfile

cat $logfile | mail -s "log" fl33tb0ard@gmail.com

rm $logfile

exit 0
